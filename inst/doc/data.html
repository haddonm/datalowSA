<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introduction</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h2>Introduction</h2>

<p>There are functions relating to data input and formatting to facilitate the use of many of the functions inside <strong>datalowSA</strong> and <strong>cede</strong>. Essentially there are five objects that can contain data to be used by <strong>datalowSA</strong>. Here we will list them and then later </p>

<ol>
<li><strong>fish</strong> is a data.frame (matrix) that contains at least the <em>year</em> and the <em>catch</em>, but can also contain <em>cpue</em> (note all column names are in lower case) along with many other variables with a value for each (or a subset) year.</li>
<li><strong>glb</strong> is an R list containing a selection of constants (see later).</li>
<li><strong>props</strong> is another data.frame (matrix) containing properties such as length-at-age, weight-at-age, maturity-at-age, and selectivity-at-age. Indeed, any variable that varies with age could be included in here.</li>
<li><strong>agedata</strong> is a list of five objects relating to the ageing data.</li>
<li><strong>lendata</strong> is a similar list of five objects relating to the length data.</li>
</ol>

<p>To illustrate the standard format of this input data there is a function <em>dataTemplate</em>. As this function writes a csv file to a hard disk no example will be run in this vignette but the code would be <em>dataTemplate(paste0(path,&ldquo;/&rdquo;,&ldquo;fishery1.csv&rdquo;))</em>, which would write a fishery1.csv file into the given path. Such a file can be read by the function <em>readdata</em>. In the example below you would have had to run the <em>dataTemplate</em> function first and then, of course, you would need to alter the file path and name from that in the example below. Note also that the data in this template is not internally consistent. The <em>fish</em> and <em>glb</em> objects relate to a deep water species while the age data derives from the English Plaice flatfish data taken from Beverton and Holt (1957).</p>

<pre><code class="r"># Obviously you need to include your own path to where you have stored fishery1.csv  
data(&quot;plaice&quot;)
str(plaice)
</code></pre>

<pre><code>## List of 5
##  $ fish   :&#39;data.frame&#39;: 9 obs. of  4 variables:
##   ..$ year : num [1:9] 1929 1930 1931 1932 1933 ...
##   ..$ catch: num [1:9] 2386 1463 2128 2430 1255 ...
##   ..$ cpue : num [1:9] 0.41 0.257 0.445 0.373 0.277 ...
##   ..$ se   : num [1:9] 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2
##  $ glb    :List of 18
##   ..$ maxage    : num 10
##   ..$ M         : num 0.3
##   ..$ Linf      : num 60
##   ..$ K         : num 0.3
##   ..$ t0        : num -0.9
##   ..$ Waa       : num 1.5
##   ..$ Wab       : num 2.9
##   ..$ M50a      : num 2
##   ..$ deltaM    : num 1.5
##   ..$ steep     : num 0.8
##   ..$ R0        : num 14
##   ..$ sela50    : num 3.38
##   ..$ deltaS    : num 0.955
##   ..$ resilience: chr &quot;medium&quot;
##   ..$ nages     : int 11
##   ..$ ages      : int [1:11] 0 1 2 3 4 5 6 7 8 9 ...
##   ..$ nyrs      : num 9
##   ..$ spsname   : chr &quot;European_Plaice&quot;
##  $ props  :&#39;data.frame&#39;: 11 obs. of  6 variables:
##   ..$ ages: num [1:11] 0 1 2 3 4 5 6 7 8 9 ...
##   ..$ laa : num [1:11] 14.2 26.1 34.9 41.4 46.2 ...
##   ..$ waa : num [1:11] 3.29 19.18 44.56 73.24 100.85 ...
##   ..$ maa : num [1:11] 0.0193 0.1231 0.5 0.8769 0.9807 ...
##   ..$ sela: num [1:11] 3.03e-05 6.60e-04 1.42e-02 2.39e-01 8.73e-01 ...
##   ..$ feca: num [1:11] 9.96e-05 1.27e-02 6.33e-01 1.75e+01 8.80e+01 ...
##  $ agedata:List of 5
##   ..$ yrage : num 9
##   ..$ ages  : num [1:9] 2 3 4 5 6 7 8 9 10
##   ..$ agemax: num 10
##   ..$ nage  : int 9
##   ..$ naa   : num [1:18, 1:11] 1929 1930 1931 1932 1933 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:18] &quot;1929&quot; &quot;1930&quot; &quot;1931&quot; &quot;1932&quot; ...
##   .. .. ..$ : chr [1:11] &quot;year&quot; &quot;sex&quot; &quot;2&quot; &quot;3&quot; ...
##  $ lendata:List of 5
##   ..$ yrlen  : num 2
##   ..$ lengths: num [1:9] 15 18 21 24 27 30 33 36 39
##   ..$ maxlen : num 39
##   ..$ nlength: int 9
##   ..$ nal    : num [1:4, 1:11] 1990 1990 1998 1998 1 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:4] &quot;1990&quot; &quot;1990&quot; &quot;1998&quot; &quot;1998&quot;
##   .. .. ..$ : chr [1:11] &quot;year&quot; &quot;sex&quot; &quot;2&quot; &quot;3&quot; ...
</code></pre>

<h2>The fish Object</h2>

<pre><code class="r">print(plaice$fish)
</code></pre>

<pre><code>##   year    catch      cpue  se
## 1 1929 2385.802 0.4096944 0.2
## 2 1930 1462.544 0.2567071 0.2
## 3 1931 2128.012 0.4445481 0.2
## 4 1932 2429.704 0.3725270 0.2
## 5 1933 1254.771 0.2774982 0.2
## 6 1934 1435.447 0.2707523 0.2
## 7 1935 1808.107 0.3850153 0.2
## 8 1936 1806.873 0.3344746 0.2
## 9 1937 1611.695 0.3930758 0.2
</code></pre>

<p>Quite often it will occur that one has catch data for a series of years before we have CPUE data and, as you can see, we have replaced the empty cells with the <strong>NA</strong> that R uses for missing data. This is more useful within R than using -99 or some other standard value. Currently the four columns present in the example are the only ones used within <strong>datalowSA</strong> and <strong>cede</strong>. However, we are still learning what data the various jurisdictions in Australia actually possess. Once that is known it should be possible to include methods that can usefully integrate any other data types available with a value each year.</p>

<p>The two packages are designed to use the component objects within the data set, and some methods (for example catch-MSY) only use the <em>fish</em> object and two parts of the <em>glb</em> (<em>spsname</em> and <em>resilience</em>). If that is all that is to be used (say where only catch data is available) then instead of filling in the whole data template the two objects can be created separately, which would be much more efficient.</p>

<pre><code class="r">year &lt;- 1986:2016
catch &lt;- c(112.9,206.3,95.7,183.1,147.4,198.9,102.1,235.5,247.8,426.8,448,577.4,
           558.5,427.9,509.3,502.4,429.6,360.2,306.2,195.7,210,287.3,214.2,260.6,
           272.2,356.9,345,282.7,285.1,237.8,233.3)
cpue &lt;- c(1.2006,1.3547,1.0585,1.0846,0.9738,1.0437,0.7759,1.0532,1.284,1.3327,
          1.4014,NA,NA,1.142,0.9957,0.8818,0.7635,0.7668,0.7198,0.5997,0.6336,
          0.6936,0.8894,0.8644,0.8442,0.8427,0.8849,0.9964,0.9804,0.957,1.0629)
dat &lt;- makedataset(year,catch,cpue,&quot;testdata&quot;,&quot;verylow&quot;)
dat
</code></pre>

<pre><code>## $fish
##      year catch   cpue
## 1986 1986 112.9 1.2006
## 1987 1987 206.3 1.3547
## 1988 1988  95.7 1.0585
## 1989 1989 183.1 1.0846
## 1990 1990 147.4 0.9738
## 1991 1991 198.9 1.0437
## 1992 1992 102.1 0.7759
## 1993 1993 235.5 1.0532
## 1994 1994 247.8 1.2840
## 1995 1995 426.8 1.3327
## 1996 1996 448.0 1.4014
## 1997 1997 577.4     NA
## 1998 1998 558.5     NA
## 1999 1999 427.9 1.1420
## 2000 2000 509.3 0.9957
## 2001 2001 502.4 0.8818
## 2002 2002 429.6 0.7635
## 2003 2003 360.2 0.7668
## 2004 2004 306.2 0.7198
## 2005 2005 195.7 0.5997
## 2006 2006 210.0 0.6336
## 2007 2007 287.3 0.6936
## 2008 2008 214.2 0.8894
## 2009 2009 260.6 0.8644
## 2010 2010 272.2 0.8442
## 2011 2011 356.9 0.8427
## 2012 2012 345.0 0.8849
## 2013 2013 282.7 0.9964
## 2014 2014 285.1 0.9804
## 2015 2015 237.8 0.9570
## 2016 2016 233.3 1.0629
## 
## $glb
## $glb$spsname
## [1] &quot;testdata&quot;
## 
## $glb$resilience
## [1] &quot;verylow&quot;
## 
## 
## $props
## NULL
## 
## $agedata
## NULL
## 
## $lendata
## NULL
</code></pre>

<p>In summary, the minimum specification for the <em>fish</em> object is a column of <em>year</em> and a column of <em>catch</em>. <em>cpue</em> is optional as are any other columns you wish to add. While <strong>datalowSA</strong> does not yet use any extra columns they may prove useful to you when plotting out results. Missing data in the <em>cpue</em> time-series should be filled with <em>NA</em> values.</p>

<h2>The glb and props objects</h2>

<p>The default <em>glb</em> object only contains the <em>spsname</em> and the <em>resilience</em>, the first of which is the first line of the .csv file and the second is identified under the RESILIENCE marker in the .csv file. The <strong>BIOLOGY</strong> marker is always required in the .csv file which leads to a matrix being defined to contain columns of the ages, the length-at-age, the weight-at-age, the maturity-at-age, the selectivity-at-age, and the fecundity-at-age. Prior to reading in the properties a number of biological parameters are entered, the number depending on whether or not the <em>property</em> parameter is TRUE or not. If TRUE then one first reads in four <em>glb</em> properties, the maxage, the M, the steepness, and the R0 values. The properties will then be read in directly.  </p>

<p>An example file <em>fisheryprops.csv</em> is provided that illustrates the format for a file where the age related properties are read in directly (as may be required is a different growth pattern to the von Bertalanffy curve or the selectivity of maturity are described using other than a logistic curve).</p>

<p>How the props matrix is filled is determined by the <em>property</em> parameter in the <em>readdata</em> function. If the <em>property</em> parameter is left as the default of FALSE, then <em>readdata</em> expects to find a series of constants as described in the &ldquo;example.csv&rdquo; file generated by the <em>dataTemplate</em> function. These constant are:</p>

<p>BIOLOGY  </p>

<ul>
<li><p>80   , maxage  the maximum age, usually a plus group </p></li>
<li><p>0.036  , M  natural mortality  </p></li>
<li><p>39.6   , Linf vB asymptotic maximum length </p></li>
<li><p>0.06   , K vB Brody growth coefficient </p></li>
<li><p>-0.01  , t0 theoretical age at zero length</p></li>
<li><p>0.0365 , Waa weight at age a parameter from the power growth equation W = waa * Age ^ wab</p></li>
<li><p>2.965  , Wab weight at age b parameter </p></li>
<li><p>31.0   , M50a age at 50% maturity  a classical logistic cure as described in the appendix of the aspm vignette under Stock Dynamics</p></li>
<li><p>5      , deltaM diff between ages at 50 and 95% maturity </p></li>
<li><p>31    , sela50 age at 50% selectivity  similarly a logistic curve as for the maturity-at-age. If selectivity is more likely to be dome shaped (as for example might be expected from a gill-net or hook fishery) this has issues for the assessment because small catches of the older age classes can imply large amounts of unseen biomass.</p></li>
<li><p>5     , deltaS diff between 50 and 95% selectivity </p></li>
<li><p>0.6   , steep stock recruitment steepness. By definition the steepness is the gradient of the stock recruitment curve at a depletion level of 20%. In a model it is one indicator of total stock productivity and resilience.</p></li>
<li><p>14    , Ln(R0) initial value but this will be estimated; as this is estimated it may be deprecated in later versions of datalowSA.  </p></li>
</ul>

<p>To apply the age-structured production model you really need to have estimates of these parameters, either from the fishery under question of from a meta analysis of very similar species.</p>

<p>As an alternative if you have empirically derived estimates of the length-at-age, the weight-at-age, the maturity-at-age, the selectivity-at-age, and the fecundity-at-age, these can be entered directly. This is especially useful if growth is not best described by the power equation, of selectivity is not logistic. Fecundity-at-age does not need to be filled in with anything other than NAs.</p>

<pre><code class="r"># obviously you need to change this path to whereever you kept your copy of this file.
data(&quot;invert&quot;)
str(invert)
</code></pre>

<pre><code>## List of 5
##  $ fish   :&#39;data.frame&#39;: 31 obs. of  7 variables:
##   ..$ year   : num [1:31] 1986 1987 1988 1989 1990 ...
##   ..$ catch  : num [1:31] 283 186 286 235 330 ...
##   ..$ cpue   : num [1:31] 0.701 0.884 0.979 0.837 1.581 ...
##   ..$ se     : num [1:31] 0 0.038 0.041 0.043 0.049 0.05 0.058 0.05 0.05 0.044 ...
##   ..$ geom   : num [1:31] 71.7 93 124.6 139.3 174.5 ...
##   ..$ vessel : num [1:31] 47 47 41 39 25 29 19 21 26 25 ...
##   ..$ records: num [1:31] 1592 1764 1395 1143 727 ...
##  $ glb    :List of 2
##   ..$ resilience: chr &quot;low&quot;
##   ..$ spsname   : chr &quot;TrawlCaught_Invertebrate&quot;
##  $ props  : NULL
##  $ agedata: NULL
##  $ lendata: NULL
</code></pre>

<p>Note the greatly reduced list of biological properties inside <em>glb</em>.</p>

<h2>agedata</h2>

<p>This requires the <strong>AGE</strong> keyword followed immediately by the number of years of age composition data, the number of sexes for which data will be presented, and a vector of the age classes represented in the data. An example might be:</p>

<ul>
<li><p>AGE</p></li>
<li><p>9 , years of numbers-at-age data </p></li>
<li><p>2 , sexes, females first=1 then males=2 </p></li>
<li><p>2, 3, 4, 5, 6, 7, 8, 9, 10,  age classes </p></li>
<li><p>1929,1,328,2120,2783,1128,370,768,237,112,48 </p></li>
<li><p>1930,1,223,2246,1938,1620,302,106,181,58,18 </p></li>
<li><p>1931,1,95,2898,3017,1159,591,116,100,82,33 </p></li>
<li><p>followed by more lines of year, sex, ages &hellip;  data</p></li>
</ul>

<p>While the fishery might act on two sexes either the sexes have not been distinguished or data is only available for females. In such a case the number of sexes is 1. If you do have age-composition data for both females and males then the number of sexes would be 2. The number of years of data and number of sexes are multiplied together to identify how many lines of age-composition data are expected. If you had five years of female age composition and only 4 years of male age composition data then you would need to add a row of year, 2, NAs &hellip;. to balance the observations within each year.</p>

<p>Currently, neither age-composition or length-composition data have methods implemented within <strong>datalowSA</strong>. In theory this R package is for data poor species although visits to different jurisdictions is making it clear that the array of data available is more complex than previously envisaged.</p>

<h2>lendata</h2>

<p>The format used for age composition data is also used for length composition data.</p>

</body>

</html>
